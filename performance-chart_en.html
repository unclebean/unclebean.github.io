<!DOCTYPE html>
<html itemtype="http://schema.org/Blog" lang="en"><head><title>Using jupyter & Plotly to create benchmark visualisation</title><meta charset="utf-8"><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"><meta content="width=device-width, initial-scale=1.0, user-scalable=no" name="viewport"><link href="/favicon.ico" rel="shortcut icon"><link href="/atom.xml" rel="alternate" title="Atom feed" type="application/atom+xml"><link href="/css/app.css" rel="stylesheet" type="text/css"><link href="https://fonts.googleapis.com/css?family=Source%2BCode%2BPro%7CArvo%3A400%2C700%7CDroid%2BSerif%3A400%2C400italic%2C700" rel="stylesheet" type="text/css"><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/highlight.min.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/languages/clojure.min.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS_HTML-full" type="text/javascript"></script><script>hljs.initHighlightingOnLoad();</script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-94017226-1', 'auto');
  ga('send', 'pageview');
</script><script>
  MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [['$','$'], ['\(','\)']],
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'] // removed 'code' entry
    }
  });
  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for(i = 0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script><meta content="/images/ub.png" property="og:image"><meta content="Using jupyter &amp; Plotly to create benchmark visualisation" property="og:title"><meta content="Using jupyter &amp; Plotly to create benchmark visualization, unquote splicing." property="og:description"></head><body><div class="header"><nav class="container" role="navigation"><div class="site"><a href="/"><img src="/images/ub_blog.svg"></a></div><ul><li><a href="/tags">Tags</a></li><li><a href="/about.html">About</a></li></ul></nav></div><div class="main"><div class="container post"><h1>Using jupyter & Plotly to create benchmark visualisation</h1><div><h4><a href="#using-jupyter-plotly-to-create-benchmark-visualisation" id="using-jupyter-plotly-to-create-benchmark-visualisation"></a>Using jupyter &amp; Plotly to create benchmark visualisation</h4>
<p><a href="https://unclebean.github.io/performance-chart.html">中文</a> <a href="https://unclebean.github.io/performance-chart_en.html">EN</a></p>
<p>Performance is important or readable &amp; maintainable important, I think different devotee has different answer. But benchmark is an insteresting topic for every developer, because benchmark can help us getting high performance and readable either.</p>
<p>What's benchmark, there is explanation from <a href="https://en.wikipedia.org/wiki/Benchmark_(computing)">wikipedia</a>:</p>
<blockquote>
<p>In <a href="https://en.wikipedia.org/wiki/Computing">computing</a>, a <strong>benchmark</strong> is the act of running a <a href="https://en.wikipedia.org/wiki/Computer_program">computer program</a>, a set of programs, or other operations, in order to assess the relative <strong>performance</strong> of an object, normally by running a number of standard tests and trials against it.[<a href="https://en.wikipedia.org/wiki/Benchmark_(computing)#cite_note-1">1]</a> The term 'benchmark' is also mostly utilized for the purposes of elaborately designed benchmarking programs themselves.</p>
</blockquote>
<p>Whatever it's for function benchmark or http server benchmark. We are looking forward to get better solution to resolve the problem. I use a bunch of benchmark tools, I'm going to write a series blog for each tool. For now I just recommand some useful tools:</p>
<ul>
<li><a href="http://openjdk.java.net/projects/code-tools/jmh/">jmh</a> java official benchmark tool.</li>
<li><a href="https://benchmarkjs.com/">Benchmark.js</a> javascript/nodejs benchmark tool。</li>
<li><a href="https://github.com/angular/angular/tree/master/packages/benchpress">benchpress</a> angular official e2e performance tool, this is my fevourite frontend performance tool, because it's not only for angular app but also can be used for other frontend app.</li>
<li><a href="https://github.com/brendangregg/perf-tools">perf-tools</a> linux benchmark tool, basically for every programming language.</li>
<li><a href="https://httpd.apache.org/docs/2.4/programs/ab.html">ab</a> apache http server benchmark tool。</li>
<li><a href="https://github.com/rakyll/hey">hey</a> go-lang implemented http server benchmark tool。</li>
</ul>
<p>Beside <strong>benchpress</strong>, all are command line tools, so we have to find a way to make benchmark data visualisation. I found out <a href="https://plot.ly/javascript/">Plotly.js</a>, it's a very good javascript library to generate chart. it also has a lot API to support other programming languages, such as scala, python, R…see <a href="https://plot.ly/api/">there</a>. I like python API, because can use with jupyter.</p>
<p><a href="https://plot.ly/python/getting-started/">installation</a>: (assuming you already have <a href="http://jupyter.org">jupyter</a>)</p>
<pre><code class="language-shell">$ pip install plotly 
</code></pre>
<p>After that you need to create a Plotly <a href="https://plot.ly/feed/">free account</a>, free account can store 25 charts and then you need initialize your Plotly account in jupyter with your account name and api_key(your api key is in <a href="https://plot.ly/settings/api">settings</a>)</p>
<pre><code class="language-python">import plotly
plotly.tools.set_credentials_file(username='account', api_key='api_key')
</code></pre>
<p>Now we can make benchmark visualisation chart, I use an reactjs benchmark <a href="https://github.com/aickin/react-16-ssr-perf/tree/new-prod-mode-15">project</a> for that showcase.</p>
<p>Actually <a href="https://github.com/aickin/react-16-ssr-perf/tree/new-prod-mode-15">react-16-ssr-perf</a> uses different benchmark chart, it also looks very nice. But I don't know whether it's convenience as python plotly :)</p>
<pre><code class="language-python">import plotly.plotly as py
import plotly.graph_objs as go
from plotly.graph_objs import *
'''
I only need to provide different benchmark categories, Plotly can help to generate a beauty chart for me!
'''
react15Raw = go.Bar(
    x=['NodeJS4.83', 'NodeJS6.11', 'NodeJS8.2', 'NodeJS8.3'],
    y=[241, 200, 152, 140],
    name='React 15.6.1(raw)'
)
react15Compiled = go.Bar(
    x=['NodeJS4.83', 'NodeJS6.11', 'NodeJS8.2', 'NodeJS8.3'],
    y=[125, 82, 55, 49],
    name='React 15.6.1(compiled)'
)
react16 = go.Bar(
    x=['NodeJS4.83', 'NodeJS6.11', 'NodeJS8.2', 'NodeJS8.3'],
    y=[60, 28, 17, 15],
    name='React 16'
)
data = [react15Raw, react15Compiled, react16]
layout = go.Layout(
    barmode='group'
)
fig = go.Figure(data=data, layout=layout)
py.iplot(fig, filename='grouped-bar')
</code></pre>
<p><img src="https://unclebean.github.io/images/newplot.png" alt="plot" /></p>
</div><aside class="comments"><div><div id="disqus_thread"></div><script type="text/javascript">var disqus_config = function () {
            //this.page.url = 'http://unclebean.github.io/hugh/';
            this.page.identifier = '/performance-chart_en.html';
        };
        (function() { 
        var d = document, s = d.createElement('script');
        s.src = 'https://hj1984.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
        })();</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></noscript></div></aside></div></div><footer class="footer"><div class="container"><ul><li><a href="https://github.com/unclebean">github.com/unclebean</a></li></ul></div></footer><script>console.log("startup...");</script></body></html>